<view class="container" bindtouchstart="onTouchStart" bindtouchend="onTouchEnd">
 
  <!-- 搜索框 -->
  <view class="search-container">
    <view class="search-box">
      <image src="/images/function/func-search.png" mode="widthFix" class="search-icon" />
      <input 
        type="text" 
        placeholder="搜索设备名称、型号、编号..." 
        value="{{searchKeyword}}"
        bindinput="onSearchInput"
        class="search-input"
      />
    </view>
  </view>

  <!-- 快捷筛选栏 -->
  <view class="quick-filter">
    <view 
      class="filter-chip {{currentStatus === 'all' ? 'active' : ''}}"
      bindtap="changeStatusFilter"
      data-status="all"
    >
      全部
    </view>
    <view 
      class="filter-chip {{currentStatus === '在库' ? 'active' : ''}}"
      bindtap="changeStatusFilter"
      data-status="在库"
    >
      在库
    </view>
    <view 
      class="filter-chip {{currentStatus === '借出' ? 'active' : ''}}"
      bindtap="changeStatusFilter"
      data-status="借出"
    >
      出库
    </view>
    <view 
      class="filter-chip {{currentStatus === 'other' ? 'active' : ''}}"
      bindtap="changeStatusFilter"
      data-status="other"
    >
      其他
    </view>
    <view 
      class="filter-chip reset-filter"
      bindtap="resetFilters"
    >
      重置筛选
    </view>
  </view>


  <!-- 设备列表 -->
  <view class="equipment-list">
    <!-- 加载状态 -->
    <view wx:if="{{isLoading}}" class="loading-view">
      <view class="loading-indicator"></view>
      <text>加载中...</text>
    </view>
    
    <!-- 空状态 -->
    <view wx:elif="{{filteredEquipmentList.length === 0}}" class="empty-view">
      <image src="/images/function/equip-no.png" mode="widthFix" class="empty-icon" />
      <text class="empty-text">暂无设备数据</text>
      <button class="empty-btn" bindtap="onAddEquipment">添加设备</button>
    </view>
    
    <!-- 设备网格 -->
    <view wx:else class="equipment-grid">
      <view 
        class="equipment-card" 
        wx:for="{{filteredEquipmentList}}" 
        wx:key="id"
        bindtap="goToDetail"
        data-id="{{item.id}}"
      >
        <view class="equipment-status {{item.status === '在库' ? 'status-available' : item.status === '借出' ? 'status-borrowed' : 'status-other'}}">
          {{item.status === '借出' ? '出库' : item.status}}
        </view>
        
        
        <view class="equipment-info">
          <view class="equipment-name">{{item.name}}</view>
          <view class="equipment-type">类型: {{item.type}}</view>
          <view class="equipment-spec">规格: {{item.specification || '未填写'}}</view>
          <view class="equipment-location">位置: {{item.location || '未设置'}}</view>
        </view>
      </view>
    </view>
  </view>

  <!-- 替换原有fab元素为float-button组件 -->
  <float-button 
    menuItems="{{menuItems}}" 
    bind:menuclick="handleFabAction"
  ></float-button>

  <!-- 一键回到顶部按钮 -->
  <view class="back-to-top {{showBackToTop && !fabOpen ? 'show' : ''}}" bindtap="backToTop">
    <image src="/images/function/func-top.png" mode="widthFix" class="back-to-top-icon" />
  </view>
</view>
    