<view class="container">
  <view class="page-title">{{isEditing ? '编辑器材' : '添加新器材'}}</view>
  
  <form class="equipment-form">
    <!-- 器材编码 -->
    <view class="form-item">
      <view class="form-label required">器材编码</view>
      <view class="form-content">
        <input 
          type="text" 
          placeholder="请输入器材编码" 
          value="{{equipment.code}}"
          data-field="code"
          bindinput="handleInput"
          class="form-input"
        />
        <button bindtap="scanToFillCode" class="scan-btn" size="mini" type="primary">
          扫码
        </button>
      </view>
    </view>
    
    <!-- 器材名称 -->
    <view class="form-item">
      <view class="form-label required">器材名称</view>
      <view class="form-content">
        <input 
          type="text" 
          placeholder="请输入器材名称" 
          value="{{equipment.name}}"
          data-field="name"
          bindinput="handleInput"
          class="form-input"
        />
      </view>
    </view>
    
    <!-- 器材类型 -->
    <view class="form-item">
      <view class="form-label required">器材类型</view>
      <view class="form-content">
        <input 
          type="text" 
          placeholder="请输入器材类型" 
          value="{{equipment.type}}"
          data-field="type"
          bindinput="handleInput"
          class="form-input"
        />
      </view>
    </view>
    
    <!-- 规格型号 -->
    <view class="form-item">
      <view class="form-label">规格型号</view>
      <view class="form-content">
        <input 
          type="text" 
          placeholder="请输入规格型号" 
          value="{{equipment.specification}}"
          data-field="specification"
          bindinput="handleInput"
          class="form-input"
        />
      </view>
    </view>
    
    <!-- 数量 -->
    <view class="form-item">
      <view class="form-label required">数量</view>
      <view class="form-content quantity-control">
        <button 
          bindtap="adjustQuantity" 
          data-type="decrease"
          class="quantity-btn"
          size="mini"
        >
          -
        </button>
        <input 
          type="number" 
          value="{{equipment.quantity}}"
          data-field="quantity"
          bindinput="handleInput"
          class="quantity-input"
        />
        <button 
          bindtap="adjustQuantity" 
          data-type="increase"
          class="quantity-btn"
          size="mini"
        >
          +
        </button>
      </view>
    </view>
    
    <!-- 存放位置 -->
    <view class="form-item">
      <view class="form-label">存放位置</view>
      <view class="form-content">
        <input 
          type="text" 
          placeholder="请输入存放位置" 
          value="{{equipment.location}}"
          data-field="location"
          bindinput="handleInput"
          class="form-input"
        />
      </view>
    </view>
    
    <!-- 状态 -->
    <view class="form-item">
      <view class="form-label required">状态</view>
      <view class="form-content">
        <picker 
          value="{{equipment.status}}" 
          range="{{statusOptions}}"
          bindchange="handleStatusChange"
          class="form-picker"
        >
          <view class="picker-view">{{equipment.status}}</view>
        </picker>
      </view>
    </view>
    
    <!-- 购买日期 -->
    <view class="form-item">
      <view class="form-label">购买日期</view>
      <view class="form-content">
        <view 
          class="date-picker" 
          bindtap="onDisplay"
        >
          {{equipment.purchaseDate || '请选择购买日期'}}
        </view>
        <picker-view
          type="date"
          value="{{currentDate}}"
          min="{{minDate}}"
          max="{{maxDate}}"
          visible="{{dateVisible}}"
          onConfirm="onConfirm"
          onCancel="onClose"
        />
      </view>
    </view>
    
    <!-- 备注 -->
    <view class="form-item">
      <view class="form-label">备注</view>
      <view class="form-content">
        <textarea 
          placeholder="请输入备注信息" 
          value="{{equipment.remarks}}"
          data-field="remarks"
          bindinput="handleInput"
          class="form-textarea"
          auto-height
        />
      </view>
    </view>
  </form>
  
  <!-- 操作按钮 -->
  <view class="operation-buttons">
    <button 
      bindtap="cancel" 
      class="cancel-btn"
    >
      取消
    </button>
    <button 
      bindtap="saveEquipment" 
      class="save-btn"
      type="primary"
    >
      {{isEditing ? '更新' : '保存'}}
    </button>
  </view>
</view>
