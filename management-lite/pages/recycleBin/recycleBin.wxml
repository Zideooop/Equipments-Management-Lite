<view class="container">
  <!-- 顶部工具栏 -->
  <view class="toolbar">
    <view class="search-input">
      <icon type="search" size="28" color="#999" />
      <input 
        placeholder="搜索已删除的器材..." 
        value="{{searchKey}}"
        bindinput="onSearchInput"
      />
    </view>
    <view class="clear-btn" bindtap="clearRecycleBin">
      <text>清空</text>
    </view>
  </view>

  <!-- 回收站列表 -->
  <view class="recycle-list">
    <view 
      wx:for="{{filteredList}}" 
      wx:key="id"
      class="recycle-item"
    >
      <view class="item-info">
        <view class="item-name">
          <text>{{item.name}}</text>
          <view class="delete-time">
            <text>删除于: {{formatTime(item.deleteTime)}}</text>
          </view>
        </view>
        <view class="item-details">
          <text class="detail-item">编码: {{item.code}}</text>
          <text class="detail-item">类型: {{item.type}}</text>
        </view>
      </view>
      <view class="item-actions">
        <button 
          bindtap="restoreEquipment" 
          data-id="{{item.id}}" 
          data-name="{{item.name}}"
          class="restore-btn"
          size="mini"
        >
          恢复
        </button>
        <button 
          bindtap="permanentlyDelete" 
          data-id="{{item.id}}" 
          data-name="{{item.name}}"
          class="delete-btn"
          size="mini"
        >
          删除
        </button>
      </view>
    </view>

    <!-- 空状态 -->
    <view wx:if="{{filteredList.length === 0 && !loading}}" class="empty-state">
      <image src="/images/empty-recycle.png" mode="widthFix" class="empty-image" />
      <text class="empty-text">回收站是空的</text>
      <text class="empty-desc">已删除的器材会暂时保存在这里</text>
    </view>

    <!-- 加载中 -->
    <view wx:if="{{loading}}" class="loading-state">
      <loading size="small" />
      <text>加载中...</text>
    </view>
  </view>
</view>
