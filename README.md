# 设备管理小程序 - README

## 项目简介

一款一款基于微信小程序云开发的设备管理系统，专为小型团队或个人打造，提供便捷的设备inventory管理解决方案。系统支持设备信息的全生命周期管理（增删改查）及云端同步功能，无需搭建独立服务器，开箱即用。

本系统特别优化了设备出入库管理流程，通过智能清单生成、最近记录推荐和双栏核对等功能，大幅提升设备出入库的效率与准确性。


## 开源声明

本项目采用 **MIT许可证** 开源，源代码可自由获取、修改和分发，但但必须遵守以下原则：

- ✅ 允许个人免费下载，学习使用
- ✅ 允许基于本项目进行二次开发和修改
- ❌ **严禁任何形式的商业获利行为**，包括但不限于：
  - 收费售卖本项目或其衍生版本
  - 作为付费服务的一部分提供给他人使用
  - 通过植入广告、付费解锁功能等方式获利
- ❌ 禁止移除或修改本项目中的开源声明和版权信息
- ✅ 引用或使用本项目代码时，需保留原作者信息和许可证声明

任何违反上述原则的行为，项目作者保留追究法律责任的权利。


## 功能特点

- 📱 **设备信息管理**：支持添加、编辑、删除设备信息（名称、类型、规格、数量等）
- 🔄 **云端同步**：自动同步设备数据到云端，支持多端数据一致性
- 🔒 **用户认证**：基于微信登录的身份验证，无需额外注册
- 📊 **操作记录**：自动记录设备操作日志，便于追溯管理
- 🗑️ **回收站功能**：支持设备临时删除与恢复，防止误操作
- 🚀 **离线可用**：本地存储支持离线操作，联网后自动同步
- 🏷️ **条码管理**：生成设备唯一条码，支持扫码快速识别

- 📋 **智能出入库管理**：
  - 入库时自动关联最近出库记录，快速生成待核对清单
  - 出库时显示最近新增设备，支持一键添加
  - 双栏对比核对视图，直观展示应入/实入数量差异
  - 自动标记未核对项和数量差异项，减少操作失误


## 技术栈

- **前端**：微信小程序原生框架（WXML/WXSS/JavaScript）
- **后端**：微信云开发（CloudBase）
  - 云函数：处理核心业务逻辑
  - 云数据库：存储设备数据及操作记录
  - 云存储：存储设备图片、条码等资源


## 项目结构

```
management-lite/
├── cloudfunctions/           # 云函数目录
│   ├── equipmentManager/     # 设备管理主云函数
│   ├── user/                 # 用户相关云函数
│   └── sync/                 # 数据同步云函数
├── miniprogram/              # 小程序前端代码
│   ├── pages/                # 页面目录
│   │   ├── index/            # 首页
│   │   ├── equipmentHub/     # 设备管理中心（核心模块）
│   │   ├── mine/             # 个人中心
│   │   ├── recycleBin/       # 回收站
│   │   └── logs/             # 操作记录
│   ├── models/               # 数据模型
│   ├── utils/                # 工具函数
│   ├── images/               # 图片资源
│   └── app.js                # 小程序入口文件
├── project.config.json       # 项目配置
├── LICENSE                   # 许可证文件
└── README.md                 # 项目说明
```


## 核心模块详解：设备管理中心

设备管理中心是系统的核心功能模块，整合了条码生成与出入库清单管理：

### 1. 条码生成功能
- 填写设备信息（名称、规格、数量等）
- 生成唯一识别条码（支持二维码/条形码）
- 保存条码图片或直接打印
- 快速添加到出入库清单

### 2. 出入库清单管理
- 支持入库/出库两种操作模式切换
- 智能推荐面板：
  - 入库场景：显示近30天未完成归还的出库单
  - 出库场景：显示近7天新增设备和常用设备
- 数量调整：支持手动输入或加减按钮调整数量
- 核对机制：
  - 入库时对比实际数量与预期数量
  - 自动计算差异量（多还/少还）
  - 高亮显示差异项和未核对项
- 清单操作：保存草稿、清空清单、生成正式单据


## 部署步骤

### 前置条件

- 安装微信开发者工具（最新稳定版）
- 注册微信小程序账号并获取AppID（测试号也可用于开发测试）
- 开通微信云开发服务（免费额度足够个人及小型团队使用）

### 本地部署

1. **克隆仓库**
   ```bash
   git clone https://github.com/your-username/equipment-management-miniprogram.git
   cd equipment-management-miniprogram
   ```

2. **导入项目**
   - 打开微信开发者工具
   - 点击"导入项目"，选择项目目录
   - 输入你的小程序AppID

3. **初始化云开发环境**
   - 在开发者工具中点击"云开发"按钮
   - 创建新的云开发环境（环境名称建议使用英文+数字）
   - 在`app.js`中配置你的云环境ID：
     ```javascript
     wx.cloud.init({
       traceUser: true,
       env: '你的云环境ID'
     })
     ```

4. **部署云函数**
   - 右键`cloudfunctions`目录下的各个云函数
   - 选择"上传并部署：云端安装依赖"

5. **创建数据库集合**
   - 在云开发控制台中进入"数据库"
   - 创建以下集合并配置权限：
     - `equipment`：存储设备数据（权限：仅创建者可读写）
     - `equipmentDeleted`：存储删除记录（权限：仅创建者可读写）
     - `operationLogs`：存储操作日志（权限：仅创建者可读写）
     - `inventoryLists`：存储出入库清单（权限：仅创建者可读写）
     - `outboundRecords`：存储出库记录（权限：仅创建者可读写）


## 使用说明

### 基础操作流程

1. **登录**：打开小程序后自动使用微信账号登录
2. **设备列表**：首页展示所有设备信息，支持下拉刷新
3. **添加设备**：点击"+"按钮添加新设备，填写基本信息
4. **编辑设备**：点击设备项进入详情页进行编辑
5. **删除设备**：支持临时删除（移至回收站）和永久删除

### 出入库操作流程

#### 入库操作
1. 进入"设备管理中心"，选择"入库"模式
2. 从"待归还出库单"中选择对应的出库记录（或手动添加设备）
3. 在双栏核对视图中填写实际入库数量
4. 系统自动标记差异项，确认无误后提交
5. 生成入库单，包含正常归还项、差异项和未归还项说明

#### 出库操作
1. 进入"设备管理中心"，选择"出库"模式
2. 从"最近新增设备"中选择（或手动添加设备）
3. 设置出库数量及预计归还日期
4. 提交生成出库单并可打印设备条码


## 开发计划

- [ ] 增加设备分类统计功能
- [ ] 实现设备借用/归还流程优化
- [ ] 添加数据导出（Excel）功能
- [ ] 优化UI设计，支持深色模式
- [ ] 增加批量操作功能
- [ ] 完善出入库报表生成功能


## 许可证

详情参见 [LICENSE](LICENSE) 文件（基于MIT许可证修改，增加禁止商业获利条款）


## 联系方式

如有问题或建议，请联系：zideooop@gmail.com  
如发现侵权行为，请通过上述邮箱举报。
