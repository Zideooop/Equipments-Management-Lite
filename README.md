# 设备管理小程序

一款基于微信小程序云开发的轻量化设备管理系统，专注于小型团队和个人的设备 inventory 管理，支持全流程设备信息跟踪与云端数据同步。

## 开源声明

本项目采用 **MIT 许可证** 开源，使用前请仔细阅读以下条款：

✅ 允许行为：
- 个人免费下载、学习和使用
- 基于本项目进行非商业目的的二次开发与修改
- 在非商业产品中引用本项目代码（需保留原作者信息）

❌ 禁止行为：
- 以任何形式进行商业获利（包括但不限于售卖源码、作为付费服务提供、植入广告等）
- 移除或修改项目中的版权声明与开源协议
- 将本项目代码用于违法违规场景

违反上述条款，项目作者保留追究法律责任的权利。

## 功能亮点

### 🔍 设备全生命周期管理
- 支持设备基础信息维护（名称、类型、规格、购买日期等）
- 记录设备状态变更（在库/借出/维修/报废）
- 关联设备附件与文档（图片、说明书、保修卡等）

### 🔄 智能数据同步
- 自动双向同步本地与云端数据
- 离线操作支持（断网时自动缓存，联网后批量同步）
- 冲突解决机制（保留最新修改，记录历史版本）

### 📊 出入库与借用管理
- 规范化出入库流程（必填经手人、时间、事由）
- 设备借用跟踪（设置归还提醒、逾期预警）
- 双栏对比核对视图（应入/实入数量差异可视化）

### 🔒 安全与追溯
- 基于微信账号的身份认证
- 操作日志全记录（谁在何时做了什么变更）
- 回收站功能（误删设备可一键恢复）

## 技术架构

| 模块 | 技术栈 | 核心组件 |
|------|--------|----------|
| 前端 | 微信小程序原生框架 | WXML/WXSS/JavaScript、自定义组件 |
| 后端 | 微信云开发 | 云函数（业务逻辑处理）、云数据库（数据存储）、云存储（文件管理） |
| 数据同步 | 自定义同步引擎 | 增量同步算法、冲突检测与解决 |

## 项目结构
management-lite/
├── cloudfunctions/           # 云函数目录
│   ├── equipmentManager/     # 设备管理主函数（CRUD、同步）
│   ├── user/                 # 用户认证与权限
│   └── inventory/            # 出入库流程处理
├── miniprogram/              # 小程序前端
│   ├── pages/                # 页面组件
│   │   ├── index/            # 设备列表首页
│   │   ├── detail/           # 设备详情页
│   │   ├── add/              # 新增设备页
│   │   ├── inventory/        # 出入库管理
│   │   ├── recycle/          # 回收站
│   │   └── mine/             # 个人中心
│   ├── components/           # 通用组件
│   │   ├── equipment-card/   # 设备卡片
│   │   ├── operation-log/    # 操作日志组件
│   │   └── sync-status/      # 同步状态组件
│   ├── models/               # 数据模型定义
│   ├── utils/                # 工具函数
│   │   ├── AppUtils.js       # 通用工具类
│   │   └── syncManager.js    # 同步管理器
│   ├── images/               # 静态资源
│   └── app.js                # 应用入口
├── project.config.json       # 项目配置
├── app.json                  # 页面路由配置
├── LICENSE                   # 许可证文件
└── README.md                 # 项目说明
## 快速部署

### 前置条件
- 微信开发者工具（v1.06.2504030 及以上）
- 微信小程序账号（个人/企业账号均可）
- 已开通微信云开发服务（免费额度足够个人使用）

### 部署步骤

1. **获取代码**
   ```bash
   git clone https://github.com/your-username/equipment-management-miniprogram.git
   cd equipment-management-miniprogram
   ```

2. **导入项目**
   - 打开微信开发者工具
   - 点击「导入项目」，选择项目根目录
   - 输入小程序 AppID（测试号可在开发者工具中直接获取）

3. **配置云环境**
   - 点击开发者工具左侧「云开发」按钮，创建新环境
   - 复制环境 ID，修改 `app.js` 中的配置：
     ```javascript
     const CONFIG = {
       CLOUD_ENV: "替换为你的云环境ID"  // 例如：cloudbase-123456
     };
     ```

4. **部署云函数**
   - 右键 `cloudfunctions` 目录下的所有函数文件夹
   - 选择「上传并部署：云端安装依赖」（首次部署约 3-5 分钟）

5. **初始化数据库**
   - 进入云开发控制台 → 数据库
   - 创建以下集合（权限均设为「仅创建者可读写」）：
     - `equipment`（设备主数据）
     - `inventoryRecords`（出入库记录）
     - `operationLogs`（操作日志）
     - `recycleBin`（回收站）
     - `userSettings`（用户设置）

## 使用指南

### 基础操作
1. **登录**：打开小程序自动完成微信快捷登录
2. **添加设备**：首页点击「+」按钮，填写设备信息提交
3. **管理设备**：点击设备卡片进入详情页，可进行编辑/删除/出入库操作
4. **数据同步**：下拉刷新或个人中心点击「同步数据」按钮

### 高级功能
- **批量操作**：长按设备卡片进入多选模式，支持批量删除/转移
- **出入库核对**：在「出入库管理」中生成清单，双栏对比核对数量
- **日志查询**：设备详情页滑动到底部查看完整操作历史
- **数据恢复**：「回收站」中可查看30天内删除的设备，支持一键恢复

## 开发计划

短期迭代（1-2个月）：
- [ ] 设备分类统计报表（按类型/状态/使用频率）
- [ ] 导出数据功能（支持 Excel 格式）
- [ ] 扫码入库（通过条形码/二维码快速录入）

长期规划：
- [ ] 多团队协作（团队隔离与权限管理）
- [ ] 耗材管理模块（与设备关联的消耗品跟踪）
- [ ] 微信通知提醒（借用到期、库存不足预警）

## 问题反馈

如遇功能异常或有改进建议，请通过以下方式反馈：
- GitHub Issues：https://github.com/your-username/equipment-management-miniprogram/issues
- 邮箱：zideooop@gmail.com
- 微信：添加好友备注「设备管理小程序反馈」

## 许可证

详细条款参见 [LICENSE](LICENSE) 文件，使用本项目即表示同意遵守所有条款。
